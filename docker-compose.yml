version: "3"

services:
  bitcoind:
    image: kylemanna/bitcoind
    volumes:
      - ./bitcoin.conf:/bitcoin/.bitcoin/bitcoin.conf
    ports:
      - "18333:18333"
      - "18332:18332"

  electrumx:
    image: alko89/electrumx
    ports:
      - "50002:50002"
    environment:
      - DAEMON_URL=http://bitcoinrpc:rpcpass@bitcoind:18332
      - COIN=BitcoinSegwit
      - NET=testnet
      - DB_ENGINE=leveldb

  explorer:
    build: .
    ports:
      - "3002:3002"
    command: ["./wait-for-electrumx.sh", "electrumx", "50002"]
